<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=windows-1251">
    <title>Offline Regular Expression Tester</title>

    <link rel="stylesheet" type="text/css" href="regexp.css">
    <script type="text/javascript" src="jquery-2.js"></script>
    <script type="text/javascript" src="common.js" charset="utf-8"></script>

</head>

<body>

<div id="tBar">
    <div class="out" style="margin-left:30px">
        <div>Offline regex tester</div>
    </div>
    <div style="clear:both"></div>
</div>

<div style="font-size: small;margin-bottom: 20px">This is sandbox to test JavaScript regular expression.</div>

<div style="padding: 0 20px">

    <table cellspacing="0" cellpadding="0">
        <tbody>
        <tr>
            <td width="99%" align="left">
                <div><b>Regular expression</b> <span style="font-size: smaller;font-style: italic">(JavaScript)</span>
                </div>
            </td>
        </tr>
        </tbody>
    </table>

    <div style="clear: both"></div>
    <div>
        <div id="regexpEditor" class="myEditor ace_editor ace-chrome" style="height: 50px;">
            <textarea class="ace_text-input" spellcheck="false"
                      style="opacity: 0; height: 22px; width: 10px; right: 931px; bottom: 28px;" wrap="off"></textarea>
            <div class="ace_gutter" style="display: none;">
                <div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 0px;"></div>
                <div class="ace_gutter-active-line" style="top: 0px; height: 22px;"></div>
            </div>
            <div class="ace_scroller" style="left: 0px; right: 0px; bottom: 0px;">
                <div class="ace_content" style="margin-top: 0px; width: 1528px; height: 94px; margin-left: 0px;">
                    <div class="ace_layer ace_print-margin-layer">
                        <div class="ace_print-margin" style="left: 804px; visibility: hidden;"></div>
                    </div>
                    <div class="ace_layer ace_marker-layer"></div>
                    <div class="ace_layer ace_text-layer" style="padding: 0px 4px;">
                        <div class="ace_line" style="height:22px"><span class="ace_openBracket">(</span><span
                                class="ace_defText">1</span><span class="ace_defText">9</span><span
                                class="ace_orSymbol">|</span><span class="ace_defText">2</span><span
                                class="ace_defText">0</span><span class="ace_closedBracket">)</span><span
                                class="ace_charClassEsc">\d</span><span class="ace_charClassEsc">\d</span><span
                                class="ace_openBracket">(</span><span class="ace_charClassStart">[</span><span
                                class="ace_charClassAtom">-</span><span class="ace_charClassAtom">&nbsp;</span><span
                                class="ace_charClassAtom">/</span><span class="ace_charClassAtom">.</span><span
                                class="ace_charClassEnd">]</span><span class="ace_closedBracket">)</span><span
                                class="ace_openBracket">(</span><span class="ace_defText">0</span><span
                                class="ace_charClassStart">[</span><span class="ace_charClassAtom">1</span><span
                                class="ace_charClassRange">-</span><span class="ace_charClassAtom">9</span><span
                                class="ace_charClassEnd">]</span><span class="ace_orSymbol">|</span><span
                                class="ace_defText">1</span><span class="ace_charClassStart">[</span><span
                                class="ace_charClassAtom">0</span><span class="ace_charClassAtom">1</span><span
                                class="ace_charClassAtom">2</span><span class="ace_charClassEnd">]</span><span
                                class="ace_closedBracket">)</span><span class="ace_groupRef">\2</span><span
                                class="ace_openBracket">(</span><span class="ace_defText">0</span><span
                                class="ace_charClassStart">[</span><span class="ace_charClassAtom">1</span><span
                                class="ace_charClassRange">-</span><span class="ace_charClassAtom">9</span><span
                                class="ace_charClassEnd">]</span><span class="ace_orSymbol">|</span><span
                                class="ace_charClassStart">[</span><span class="ace_charClassAtom">1</span><span
                                class="ace_charClassAtom">2</span><span class="ace_charClassEnd">]</span><span
                                class="ace_charClassStart">[</span><span class="ace_charClassAtom">0</span><span
                                class="ace_charClassRange">-</span><span class="ace_charClassAtom">9</span><span
                                class="ace_charClassEnd">]</span><span class="ace_orSymbol">|</span><span
                                class="ace_defText">3</span><span class="ace_charClassStart">[</span><span
                                class="ace_charClassAtom">0</span><span class="ace_charClassAtom">1</span><span
                                class="ace_charClassEnd">]</span><span class="ace_closedBracket">)</span></div>
                    </div>
                    <div class="ace_layer ace_marker-layer"></div>
                    <div class="ace_layer ace_cursor-layer ace_hidden-cursors">
                        <div class="ace_cursor" style="left: 604px; top: 0px; width: 10px; height: 22px;"></div>
                    </div>
                </div>
            </div>
            <div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 22px; bottom: 0px;">
                <div class="ace_scrollbar-inner" style="width: 22px; height: 22px;"></div>
            </div>
            <div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 22px; left: 0px; right: 0px;">
                <div class="ace_scrollbar-inner" style="height: 22px; width: 1528px;"></div>
            </div>
            <div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font: inherit; overflow: hidden;">
                <div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font: inherit; overflow: visible;"></div>
                <div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-optical-sizing: inherit; font-language-override: inherit; font-feature-settings: inherit; font-variation-settings: inherit; overflow: visible;">
                    X
                </div>
            </div>
        </div>
        <div id="flags" align="right">
            <label title="Perform case-insensitive matching">
                <input flagvalue="i" tabindex="20" type="checkbox">Case insensitive (<b>i</b>)
            </label>
            <label title="Perform a global match (find all matches rather than stopping after the first match)">
                <input flagvalue="g" tabindex="21" checked="checked" type="checkbox">Global (<b>g</b>)
            </label>
            <label title="^ and $ will match the beginning/end of lines">
                <input flagvalue="m" tabindex="22" type="checkbox">Multi-line (<b>m</b>)
            </label>
        </div>
    </div>


    <div style="font-weight: bold;padding-bottom: 7px">Text to test</div>
    <div id="textEditor" class="myEditor ace_editor ace-chrome" style="height: 300px;font-size: 14px"><textarea
            class="ace_text-input" spellcheck="false"
            style="opacity: 0; height: 17px; width: 8px; right: 935px; bottom: 283px;" wrap="off"></textarea>
        <div class="ace_gutter" style="display: none;">
            <div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 0px;"></div>
            <div class="ace_gutter-active-line" style="top: 0px; height: 17px;"></div>
        </div>
        <div class="ace_scroller" style="left: 0px; right: 0px; bottom: 0px;">
            <div class="ace_content" style="margin-top: 0px; width: 1538px; height: 334px; margin-left: 0px;">
                <div class="ace_layer ace_print-margin-layer">
                    <div class="ace_print-margin" style="left: 644px; visibility: hidden;"></div>
                </div>
                <div class="ace_layer ace_marker-layer">
                    <div class="matched1" style="height:17px;width:80px;top:0px;left:4px;"></div>
                    <div class="matched2" style="height:17px;width:80px;top:0px;left:92px;"></div>
                    <div class="matched1" style="height:17px;width:80px;top:0px;left:180px;"></div>
                    <div class="matched2" style="height:17px;width:80px;top:0px;left:268px;"></div>
                    <div class="matched1" style="height:17px;width:80px;top:0px;left:532px;"></div>
                    <div class="currentMatchResult" style="height:17px;width:80px;top:0px;left:532px;"></div>
                </div>
                <div class="ace_layer ace_text-layer" style="padding: 0px 4px;">
                    <div class="ace_line" style="height:17px">1900-01-01&nbsp;2007/08/13&nbsp;1900.01.01&nbsp;1900&nbsp;01&nbsp;01&nbsp;1900-01.01&nbsp;1900&nbsp;13&nbsp;01&nbsp;1900&nbsp;02&nbsp;31</div>
                </div>
                <div class="ace_layer ace_marker-layer"></div>
                <div class="ace_layer ace_cursor-layer ace_hidden-cursors">
                    <div class="ace_cursor" style="left: 612px; top: 0px; width: 8px; height: 17px;"></div>
                </div>
            </div>
        </div>
        <div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 22px; bottom: 0px;">
            <div class="ace_scrollbar-inner" style="width: 22px; height: 17px;"></div>
        </div>
        <div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 22px; left: 0px; right: 0px;">
            <div class="ace_scrollbar-inner" style="height: 22px; width: 1538px;"></div>
        </div>
        <div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font: inherit; overflow: hidden;">
            <div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font: inherit; overflow: visible;"></div>
            <div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-optical-sizing: inherit; font-language-override: inherit; font-feature-settings: inherit; font-variation-settings: inherit; overflow: visible;">
                X
            </div>
        </div>
    </div>
    <div id="matchResult">&nbsp;<span>5 matches found</span></div>

    <div style="font-weight: bold;padding-bottom: 7px">Capture groups</div>
    <table id="captureGroups" cellspacing="3" cellpadding="0">
        <tbody>
        <tr>
            <td>#0</td>
            <td><span class="groupText">1900 02 31</span></td>
        </tr>
        <tr>
            <td>#1</td>
            <td><span class="groupText">19</span></td>
        </tr>
        <tr>
            <td>#2</td>
            <td><span class="groupText"> </span></td>
        </tr>
        <tr>
            <td>#3</td>
            <td><span class="groupText">02</span></td>
        </tr>
        <tr>
            <td>#4</td>
            <td><span class="groupText">31</span></td>
        </tr>
        </tbody>
    </table>
</div>

<script src="ace.js" type="text/javascript" charset="utf-8"></script>
<script src="editorDependencies.js" type="text/javascript" charset="utf-8"></script>
<script src="regexEditorApi.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    if (getUrlParam('flags') !== undefined) {
        initFlags(getUrlParam('flags'))
    } else if (localStorage.getItem('flags') != null) {
        initFlags(localStorage.getItem('flags'))
    }

    let regex_api = ace.require('ess/regex/regex_api');
    let installRegexEditorApi = regex_api.installRegexEditorApi;
    let installFlagsCheckboxListener = regex_api.installFlagsCheckboxListener;

    let regexpEditor = ace.edit("regexpEditor");
    customizeEditor(regexpEditor);
    regexpEditor.setOptions({
        highlightActiveLine: false,
        showGutter: false,
        showPrintMargin: false,
        mode: "ace/mode/regexp"
    });

    let regexStr = getUrlParam('regex');
    let textStr;
    if (!regexStr) {
        regexStr = localStorage.getItem('regex');
        if (regexStr != null) {
            textStr = localStorage.getItem('text') || ''
        } else {
            regexStr = '(19|20)\\d\\d([- /.])(0[1-9]|1[012])\\2(0[1-9]|[12][0-9]|3[01])';
            textStr = '1900-01-01 2007/08/13 1900.01.01 1900 01 01 1900-01.01 1900 13 01 1900 02 31';
        }
    } else {
        textStr = getUrlParam('text') || ''
    }

    regexpEditor.setValue(regexStr);
    regexpEditor.selection.clearSelection();

    installRegexEditorApi(regexpEditor);
    installFlagsCheckboxListener(regexpEditor, $('#flags input'));

    let textEditor = ace.edit("textEditor");
    customizeEditor(textEditor);
    textEditor.setOptions({
        highlightActiveLine: false,
        showGutter: false,
        showPrintMargin: false,
        mode: "ace/mode/text"
    });

    textEditor.setValue(textStr);
    textEditor.selection.clearSelection();

    installRegexpFindDependency(regexpEditor, textEditor, $('#matchResult span'), $('#captureGroups tbody'));

    function initFlags(flags) {
        $('#flags input:checkbox').each(function () {
            var checked = flags.indexOf($(this).attr('flagValue')) >= 0;
            $(this).prop('checked', checked)
        })
    }

    function saveRegexAndText() {
        localStorage.setItem('regex', regexpEditor.getValue());
        localStorage.setItem('text', textEditor.getValue());
        localStorage.setItem('flags', regexpEditor.regex_flags);
    }
</script>
</body>
</html>